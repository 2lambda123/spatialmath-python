

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Transforms in 3D &mdash; Spatial Maths package 0.8.7
 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"presup": ["\\,{}^{\\scriptscriptstyle #1}\\!", 1], "SE": ["\\mathbf{SE}(#1)", 1], "SO": ["\\mathbf{SO}(#1)", 1], "se": ["\\mathbf{se}(#1)", 1], "so": ["\\mathbf{so}(#1)", 1], "vec": ["\\boldsymbol{#1}", 1], "dvec": ["\\dot{\\boldsymbol{#1}}", 1], "ddvec": ["\\ddot{\\boldsymbol{#1}}", 1], "fvec": ["\\presup{#1}\\boldsymbol{#2}", 2], "fdvec": ["\\presup{#1}\\dot{\\boldsymbol{#2}}", 2], "fddvec": ["\\presup{#1}\\ddot{\\boldsymbol{#2}}", 2], "norm": ["\\Vert #1 \\Vert", 1], "mat": ["\\mathbf{#1}", 1], "fmat": ["\\presup{#1}\\mathbf{#2}", 2], "sk": ["\\left[#1\\right]", 1], "skx": ["\\left[#1\\right]_{\\times}", 1], "vex": ["\\vee\\left( #1\\right)", 1], "vexx": ["\\vee_{\\times}\\left( #1\\right)", 1], "q": "\\mathring{q}", "fq": ["\\presup{#1}\\mathring{q}", 1]}}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Transforms in ND" href="func_nd.html" />
    <link rel="prev" title="Transforms in 2D" href="func_2d.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Spatial Maths package
          

          
            
            <img src="_static/CartesianSnakes_LogoW.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="spatialmath.html">Class reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="functions.html">Function reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="func_2d.html">Transforms in 2D</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transforms in 3D</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_nd.html">Transforms in ND</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_quat.html">Quaternions</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_symbolic.html">Symbolic computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_vector.html">Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_args.html">Argument checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="func_graphics.html">Graphics and animation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="indices.html">Indices</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Spatial Maths package</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="functions.html">Function reference</a> &raquo;</li>
        
      <li>Transforms in 3D</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/func_3d.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="func_nd.html" class="btn btn-neutral float-right" title="Transforms in ND" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="func_2d.html" class="btn btn-neutral float-left" title="Transforms in 2D" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-spatialmath.base.transforms3d">
<span id="transforms-in-3d"></span><h1>Transforms in 3D<a class="headerlink" href="#module-spatialmath.base.transforms3d" title="Permalink to this headline">¶</a></h1>
<p>This modules contains functions to create and transform SO(3) and SE(3) matrices,
respectively 3D rotation matrices and homogeneous tranformation matrices.</p>
<p>Vector arguments are what numpy refers to as <code class="docutils literal notranslate"><span class="pre">array_like</span></code> and can be a list,
tuple, numpy array, numpy row vector or numpy column vector.</p>
<dl class="py function">
<dt id="spatialmath.base.transforms3d.rotx">
<code class="sig-name descname">rotx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SO(3) rotation about X-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about X-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotx(θ)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of θ radians about the x-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotx(θ,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but θ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotx</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.7071, -0.7071],</span>
<span class="go">       [ 0.    ,  0.7071,  0.7071]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.trotx" title="spatialmath.base.transforms3d.trotx"><code class="xref py py-func docutils literal notranslate"><span class="pre">trotx()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.roty">
<code class="sig-name descname">roty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#roty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.roty" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SO(3) rotation about Y-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about Y-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">roty(θ)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of θ radians about the y-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roty(θ,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but θ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roty</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553,  0.    ,  0.2955],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ],</span>
<span class="go">       [-0.2955,  0.    ,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">roty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7071,  0.    ,  0.7071],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ],</span>
<span class="go">       [-0.7071,  0.    ,  0.7071]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.troty" title="spatialmath.base.transforms3d.troty"><code class="xref py py-func docutils literal notranslate"><span class="pre">troty()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.rotz">
<code class="sig-name descname">rotz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rotz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rotz" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SO(3) rotation about Z-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about Z-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rotz(θ)</span></code> is an SO(3) rotation matrix (3x3) representing a rotation
of θ radians about the z-axis</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rotz(θ,</span> <span class="pre">&quot;deg&quot;)</span></code> as above but θ is in degrees</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotz</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rotz</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7071, -0.7071,  0.    ],</span>
<span class="go">       [ 0.7071,  0.7071,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><code class="xref py py-func docutils literal notranslate"><span class="pre">yrotz()</span></code></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trotx">
<code class="sig-name descname">trotx</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trotx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trotx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SE(3) pure rotation about X-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about X-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(θ)</span></code> is a homogeneous transformation (4x4) representing a rotation
of θ radians about the x-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(θ,</span> <span class="pre">'deg')</span></code> as above but θ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotx(θ,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotx</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  1.    ],</span>
<span class="go">       [ 0.    ,  0.7071, -0.7071,  2.    ],</span>
<span class="go">       [ 0.    ,  0.7071,  0.7071,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotx" title="spatialmath.base.transforms3d.rotx"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotx()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.troty">
<code class="sig-name descname">troty</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#troty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.troty" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SE(3) pure rotation about Y-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about Y-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">troty(θ)</span></code> is a homogeneous transformation (4x4) representing a rotation
of θ radians about the y-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">troty(θ,</span> <span class="pre">'deg')</span></code> as above but θ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">troty(θ,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">troty</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553,  0.    ,  0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ,  0.    ],</span>
<span class="go">       [-0.2955,  0.    ,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 0.7071,  0.    ,  0.7071,  1.    ],</span>
<span class="go">       [ 0.    ,  1.    ,  0.    ,  2.    ],</span>
<span class="go">       [-0.7071,  0.    ,  0.7071,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.roty" title="spatialmath.base.transforms3d.roty"><code class="xref py py-func docutils literal notranslate"><span class="pre">roty()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trotz">
<code class="sig-name descname">trotz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trotz"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trotz" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SE(3) pure rotation about Z-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation angle about Z-axis</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>t</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D translation vector, defaults to [0,0,0]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(θ)</span></code> is a homogeneous transformation (4x4) representing a rotation
of θ radians about the z-axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(θ,</span> <span class="pre">'deg')</span></code> as above but θ is in degrees</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trotz(θ,</span> <span class="pre">'rad',</span> <span class="pre">t=[x,y,z])</span></code> as above with translation of [x,y,z]</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotz</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9553, -0.2955,  0.    ,  0.    ],</span>
<span class="go">       [ 0.2955,  0.9553,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trotz</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="go">array([[ 0.7071, -0.7071,  0.    ,  1.    ],</span>
<span class="go">       [ 0.7071,  0.7071,  0.    ,  2.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  1.    ,  3.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rotz" title="spatialmath.base.transforms3d.rotz"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotz()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.transl">
<code class="sig-name descname">transl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">z</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#transl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.transl" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SE(3) pure translation, or extract translation from SE(3) matrix</p>
<p><strong>Create a translational SE(3) matrix</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>float</em>) – translation along X-axis</p></li>
<li><p><strong>y</strong> (<em>float</em>) – translation along Y-axis</p></li>
<li><p><strong>z</strong> (<em>float</em>) – translation along Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy(4,4)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad argument</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">transl(</span> <span class="pre">X,</span> <span class="pre">Y,</span> <span class="pre">Z</span> <span class="pre">)</span></code> is an SE(3) homogeneous transform (4x4) representing a
pure translation of X, Y and Z.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">transl(</span> <span class="pre">V</span> <span class="pre">)</span></code> as above but the translation is given by a 3-element
list, dict, or a numpy array, row or column vector.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">array([[1, 0, 0, 3],</span>
<span class="go">       [0, 1, 0, 4],</span>
<span class="go">       [0, 0, 1, 5],</span>
<span class="go">       [0, 0, 0, 1]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">array([[1., 0., 0., 3.],</span>
<span class="go">       [0., 1., 0., 4.],</span>
<span class="go">       [0., 0., 1., 5.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="go">array([[1., 0., 0., 3.],</span>
<span class="go">       [0., 1., 0., 4.],</span>
<span class="go">       [0., 0., 1., 5.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
</pre></div>
</div>
<p><strong>Extract the translational part of an SE(3) matrix</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>numpy</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – SE(3) transformation matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>translation elements of SE(2) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad argument</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">transl(T)</span></code> is the translational part of a homogeneous transform T as a
3-element numpy array.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transl</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([3, 4, 5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is compatible with the MATLAB version of the Toolbox.  It
is unusual/weird in doing two completely different things inside the one
function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.transl2" title="spatialmath.base.transforms2d.transl2"><code class="xref py py-func docutils literal notranslate"><span class="pre">transl2()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.ishom">
<code class="sig-name descname">ishom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#ishom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.ishom" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if matrix belongs to SE(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>numpy</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – SE(3) matrix to test</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check validity of rotation submatrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether matrix is an SE(3) homogeneous transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ishom(T)</span></code> is True if the argument <code class="docutils literal notranslate"><span class="pre">T</span></code> is of dimension 4x4</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ishom(T,</span> <span class="pre">check=True)</span></code> as above, but also checks orthogonality of the rotation sub-matrix and
validitity of the bottom row.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span> <span class="c1"># invalid SE(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>  <span class="c1"># a quick check says it is an SE(3)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># but if we check more carefully...</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ishom</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.isR" title="spatialmath.base.transformsNd.isR"><code class="xref py py-func docutils literal notranslate"><span class="pre">isR()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.isrot" title="spatialmath.base.transforms3d.isrot"><code class="xref py py-func docutils literal notranslate"><span class="pre">isrot()</span></code></a>, <a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.ishom2" title="spatialmath.base.transforms2d.ishom2"><code class="xref py py-func docutils literal notranslate"><span class="pre">ishom2()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.isrot">
<code class="sig-name descname">isrot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">R</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#isrot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.isrot" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if matrix belongs to SO(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>numpy</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SO(3) matrix to test</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check validity of rotation submatrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>whether matrix is an SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isrot(R)</span></code> is True if the argument <code class="docutils literal notranslate"><span class="pre">R</span></code> is of dimension 3x3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isrot(R,</span> <span class="pre">check=True)</span></code> as above, but also checks orthogonality of the rotation matrix.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">R</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span> <span class="c1"># invalid SO(3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>  <span class="c1"># a quick check says it is an SO(3)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">isrot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># but if we check more carefully...</span>
<span class="go">False</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.isR" title="spatialmath.base.transformsNd.isR"><code class="xref py py-func docutils literal notranslate"><span class="pre">isR()</span></code></a>, <a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.isrot2" title="spatialmath.base.transforms2d.isrot2"><code class="xref py py-func docutils literal notranslate"><span class="pre">isrot2()</span></code></a>,  <a class="reference internal" href="#spatialmath.base.transforms3d.ishom" title="spatialmath.base.transforms3d.ishom"><code class="xref py py-func docutils literal notranslate"><span class="pre">ishom()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.rpy2r">
<code class="sig-name descname">rpy2r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roll</span></em>, <em class="sig-param"><span class="n">pitch</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">yaw</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">'zyx'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rpy2r"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rpy2r" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SO(3) rotation matrix from roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roll</strong> (<em>float</em>) – roll angle</p></li>
<li><p><strong>pitch</strong> (<em>float</em>) – pitch angle</p></li>
<li><p><strong>yaw</strong> (<em>float</em>) – yaw angle</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>unit</strong> – rotation order: ‘zyx’ [default], ‘xyz’, or ‘yxz’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad argument</p>
</dd>
</dl>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2r(ROLL,</span> <span class="pre">PITCH,</span> <span class="pre">YAW)</span></code> is an SO(3) orthonormal rotation matrix
(3x3) equivalent to the specified roll, pitch, yaw angles angles.
These correspond to successive rotations about the axes specified by <code class="docutils literal notranslate"><span class="pre">order</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘zyx’ [default], rotate by yaw about the z-axis, then by pitch about the new y-axis,
then by roll about the new x-axis.  Convention for a mobile robot with x-axis forward
and y-axis sideways.</p></li>
<li><p>‘xyz’, rotate by yaw about the x-axis, then by pitch about the new y-axis,
then by roll about the new z-axis. Covention for a robot gripper with z-axis forward
and y-axis between the gripper fingers.</p></li>
<li><p>‘yxz’, rotate by yaw about the y-axis, then by pitch about the new x-axis,
then by roll about the new z-axis. Convention for a camera with z-axis parallel
to the optic axis and x-axis parallel to the pixel rows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2r(RPY)</span></code> as above but the roll, pitch, yaw angles are taken
from <code class="docutils literal notranslate"><span class="pre">RPY</span></code> which is a 3-vector with values
(ROLL, PITCH, YAW).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2r</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.8138, -0.441 ,  0.3785],</span>
<span class="go">       [ 0.4698,  0.8826,  0.018 ],</span>
<span class="go">       [-0.342 ,  0.1632,  0.9254]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.rpy2tr">
<code class="sig-name descname">rpy2tr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">roll</span></em>, <em class="sig-param"><span class="n">pitch</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">yaw</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">'zyx'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#rpy2tr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.rpy2tr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SE(3) rotation matrix from roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roll</strong> (<em>float</em>) – roll angle</p></li>
<li><p><strong>pitch</strong> (<em>float</em>) – pitch angle</p></li>
<li><p><strong>yaw</strong> (<em>float</em>) – yaw angle</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>unit</strong> – rotation order: ‘zyx’ [default], ‘xyz’, or ‘yxz’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2tr(ROLL,</span> <span class="pre">PITCH,</span> <span class="pre">YAW)</span></code> is an SO(3) orthonormal rotation matrix
(3x3) equivalent to the specified roll, pitch, yaw angles angles.
These correspond to successive rotations about the axes specified by <code class="docutils literal notranslate"><span class="pre">order</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p>‘zyx’ [default], rotate by yaw about the z-axis, then by pitch about the new y-axis,
then by roll about the new x-axis.  Convention for a mobile robot with x-axis forward
and y-axis sideways.</p></li>
<li><p>‘xyz’, rotate by yaw about the x-axis, then by pitch about the new y-axis,
then by roll about the new z-axis. Convention for a robot gripper with z-axis forward
and y-axis between the gripper fingers.</p></li>
<li><p>‘yxz’, rotate by yaw about the y-axis, then by pitch about the new x-axis,
then by roll about the new z-axis. Convention for a camera with z-axis parallel
to the optic axis and x-axis parallel to the pixel rows.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">rpy2tr(RPY)</span></code> as above but the roll, pitch, yaw angles are taken
from <code class="docutils literal notranslate"><span class="pre">RPY</span></code> which is a 3-vector with values
(ROLL, PITCH, YAW).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184,  0.    ],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ,  0.    ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9363, -0.2751,  0.2184,  0.    ],</span>
<span class="go">       [ 0.2896,  0.9564, -0.037 ,  0.    ],</span>
<span class="go">       [-0.1987,  0.0978,  0.9752,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rpy2tr</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.8138, -0.441 ,  0.3785,  0.    ],</span>
<span class="go">       [ 0.4698,  0.8826,  0.018 ,  0.    ],</span>
<span class="go">       [-0.342 ,  0.1632,  0.9254,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the translational component is zero but it can be 
set to a non-zero value.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.eul2r">
<code class="sig-name descname">eul2r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">phi</span></em>, <em class="sig-param"><span class="n">theta</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">psi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#eul2r"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.eul2r" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SO(3) rotation matrix from Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phi</strong> (<em>float</em>) – Z-axis rotation</p></li>
<li><p><strong>theta</strong> (<em>float</em>) – Y-axis rotation</p></li>
<li><p><strong>psi</strong> (<em>float</em>) – Z-axis rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2r(PHI,</span> <span class="pre">θ,</span> <span class="pre">PSI)</span></code> is an SO(3) orthonornal rotation
matrix equivalent to the specified Euler angles.  These correspond
to rotations about the Z, Y, Z axes respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2r(EUL)</span></code> as above but the Euler angles are taken from
<code class="docutils literal notranslate"><span class="pre">EUL</span></code> which is a 3-vector with values
(PHI θ PSI).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2r</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7146, -0.6131,  0.3368],</span>
<span class="go">       [ 0.6337,  0.7713,  0.0594],</span>
<span class="go">       [-0.2962,  0.171 ,  0.9397]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.eul2tr">
<code class="sig-name descname">eul2tr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">phi</span></em>, <em class="sig-param"><span class="n">theta</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">psi</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#eul2tr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.eul2tr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SE(3) pure rotation matrix from Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phi</strong> (<em>float</em>) – Z-axis rotation</p></li>
<li><p><strong>theta</strong> (<em>float</em>) – Y-axis rotation</p></li>
<li><p><strong>psi</strong> (<em>float</em>) – Z-axis rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2tr(PHI,</span> <span class="pre">θ,</span> <span class="pre">PSI)</span></code> is an SE(3) homogeneous transformation
matrix equivalent to the specified Euler angles.  These correspond
to rotations about the Z, Y, Z axes respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">=</span> <span class="pre">eul2tr(EUL)</span></code> as above but the Euler angles are taken from
<code class="docutils literal notranslate"><span class="pre">EUL</span></code> which is a 3-vector with values
(PHI θ PSI).</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977,  0.    ],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198,  0.    ],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>
<span class="go">array([[ 0.9021, -0.3836,  0.1977,  0.    ],</span>
<span class="go">       [ 0.3875,  0.9216,  0.0198,  0.    ],</span>
<span class="go">       [-0.1898,  0.0587,  0.9801,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">eul2tr</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="go">array([[ 0.7146, -0.6131,  0.3368,  0.    ],</span>
<span class="go">       [ 0.6337,  0.7713,  0.0594,  0.    ],</span>
<span class="go">       [-0.2962,  0.171 ,  0.9397,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the translational component is zero but it can be 
set to a non-zero value.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.angvec2r">
<code class="sig-name descname">angvec2r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvec2r"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvec2r" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SO(3) rotation matrix from rotation angle and axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>v</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D rotation axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">angvec2r(θ,</span> <span class="pre">V)</span></code> is an SO(3) orthonormal rotation matrix
equivalent to a rotation of <code class="docutils literal notranslate"><span class="pre">θ</span></code> about the vector <code class="docutils literal notranslate"><span class="pre">V</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2r</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rotx(0.3)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2r</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>    <span class="c1"># rotx(0)</span>
<span class="go">array([[1., 0., 0.],</span>
<span class="go">       [0., 1., 0.],</span>
<span class="go">       [0., 0., 1.]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">θ</span> <span class="pre">==</span> <span class="pre">0</span></code> then return identity matrix.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">θ</span> <span class="pre">~=</span> <span class="pre">0</span></code> then <code class="docutils literal notranslate"><span class="pre">V</span></code> must have a finite length.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2tr" title="spatialmath.base.transforms3d.angvec2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.angvec2tr">
<code class="sig-name descname">angvec2tr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">theta</span></em>, <em class="sig-param"><span class="n">v</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#angvec2tr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.angvec2tr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an SE(3) pure rotation from rotation angle and axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>theta</strong> (<em>float</em>) – rotation</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – angular units: ‘rad’ [default], or ‘deg’</p></li>
<li><p><strong>v</strong> (<em>: array_like</em><em>(</em><em>3</em><em>)</em>) – 3D rotation axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">angvec2tr(θ,</span> <span class="pre">V)</span></code> is an SE(3) homogeneous transformation matrix
equivalent to a rotation of <code class="docutils literal notranslate"><span class="pre">θ</span></code> about the vector <code class="docutils literal notranslate"><span class="pre">V</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angvec2tr</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>  <span class="c1"># rtotx(0.3)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553, -0.2955,  0.    ],</span>
<span class="go">       [ 0.    ,  0.2955,  0.9553,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">θ</span> <span class="pre">==</span> <span class="pre">0</span></code> then return identity matrix.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">θ</span> <span class="pre">~=</span> <span class="pre">0</span></code> then <code class="docutils literal notranslate"><span class="pre">V</span></code> must have a finite length.</p></li>
<li><p>The translational part is zero.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.oa2r">
<code class="sig-name descname">oa2r</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">o</span></em>, <em class="sig-param"><span class="n">a</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#oa2r"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.oa2r" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SO(3) rotation matrix from two vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D vector parallel to Y- axis</p></li>
<li><p><strong>a</strong> – 3D vector parallel to the Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SO(3) rotation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3,3)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">oa2tr(O,</span> <span class="pre">A)</span></code> is an SO(3) orthonormal rotation matrix for a frame defined in terms of
vectors parallel to its Y- and Z-axes with respect to a reference frame.  In robotics these axes are
respectively called the orientation and approach vectors defined such that
R = [N O A] and N = O x A.</p>
<p>Steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>N’ = O x A</p></li>
<li><p>O’ = A x N</p></li>
<li><p>normalize N’, O’, A</p></li>
<li><p>stack horizontally into rotation matrix</p></li>
</ol>
</div></blockquote>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oa2r</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># Y := Y, Z := -Z</span>
<span class="go">array([[-1.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0., -1.]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The A vector is the only guaranteed to have the same direction in the resulting
rotation matrix</p></li>
<li><p>O and A do not have to be unit-length, they are normalized</p></li>
<li><p>O and A do not have to be orthogonal, so long as they are not parallel</p></li>
<li><p>The vectors O and A are parallel to the Y- and Z-axes of the equivalent coordinate frame.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.oa2tr" title="spatialmath.base.transforms3d.oa2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">oa2tr()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.oa2tr">
<code class="sig-name descname">oa2tr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">o</span></em>, <em class="sig-param"><span class="n">a</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#oa2tr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.oa2tr" title="Permalink to this definition">¶</a></dt>
<dd><p>Create SE(3) pure rotation from two vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<em>array_like</em><em>(</em><em>3</em><em>)</em>) – 3D vector parallel to Y- axis</p></li>
<li><p><strong>a</strong> – 3D vector parallel to the Z-axis</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) transformation matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">T</span> <span class="pre">=</span> <span class="pre">oa2tr(O,</span> <span class="pre">A)</span></code> is an SE(3) homogeneous transformation matrix for a frame defined in terms of
vectors parallel to its Y- and Z-axes with respect to a reference frame.  In robotics these axes are
respectively called the orientation and approach vectors defined such that
R = [N O A] and N = O x A.</p>
<p>Steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>N’ = O x A</p></li>
<li><p>O’ = A x N</p></li>
<li><p>normalize N’, O’, A</p></li>
<li><p>stack horizontally into rotation matrix</p></li>
</ol>
</div></blockquote>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oa2tr</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  <span class="c1"># Y := Y, Z := -Z</span>
<span class="go">array([[-1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1.,  0.,  0.],</span>
<span class="go">       [ 0.,  0., -1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.oa2r" title="spatialmath.base.transforms3d.oa2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">oa2r()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tr2angvec">
<code class="sig-name descname">tr2angvec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2angvec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2angvec" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert SO(3) or SE(3) to angle and rotation vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – ‘rad’ or ‘deg’</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><span class="math notranslate nohighlight">\((\theta, {\bf v})\)</span></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">(v,</span> <span class="pre">θ)</span> <span class="pre">=</span> <span class="pre">tr2angvec(R)</span></code> is a rotation angle and a vector about which the rotation
acts that corresponds to the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>By default the angle is in radians but can be changed setting <cite>unit=’deg’</cite>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">,</span> <span class="n">theta</span> <span class="o">=</span> <span class="n">tr2angvec</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">theta</span><span class="p">)</span>
<span class="go">0.7853981633974483 [0. 1. 0.]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.angvec2r" title="spatialmath.base.transforms3d.angvec2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.angvec2tr" title="spatialmath.base.transforms3d.angvec2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">angvec2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tr2eul">
<code class="sig-name descname">tr2eul</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">flip</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2eul"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2eul" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert SO(3) or SE(3) to ZYX Euler angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – ‘rad’ or ‘deg’</p></li>
<li><p><strong>flip</strong> (<em>bool</em>) – choose first Euler angle to be in quadrant 2 or 3</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ZYZ Euler angles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">tr2eul(R)</span></code> are the Euler angles corresponding to
the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>The 3 angles <span class="math notranslate nohighlight">\([\phi, \theta, \psi]\)</span> correspond to sequential rotations about the
Z, Y and Z axes respectively.</p>
<p>By default the angles are in radians but can be changed setting <cite>unit=’deg’</cite>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">eul2tr</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">[[ 0.7264 -0.6232  0.2896  0.    ]</span>
<span class="go"> [ 0.6364  0.7691  0.0587  0.    ]</span>
<span class="go"> [-0.2593  0.1417  0.9553  0.    ]</span>
<span class="go"> [ 0.      0.      0.      1.    ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2eul</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([0.2, 0.3, 0.5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>There is a singularity for the case where <span class="math notranslate nohighlight">\(\theta=0\)</span> in which 
case we arbitrarily set <span class="math notranslate nohighlight">\(\phi = 0\)</span> and <span class="math notranslate nohighlight">\(\phi\)</span> is set to
<span class="math notranslate nohighlight">\(\phi+\psi\)</span>.</p></li>
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.eul2r" title="spatialmath.base.transforms3d.eul2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.eul2tr" title="spatialmath.base.transforms3d.eul2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">eul2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tr2rpy">
<code class="sig-name descname">tr2rpy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">unit</span><span class="o">=</span><span class="default_value">'rad'</span></em>, <em class="sig-param"><span class="n">order</span><span class="o">=</span><span class="default_value">'zyx'</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2rpy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2rpy" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert SO(3) or SE(3) to roll-pitch-yaw angles</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>unit</strong> (<em>str</em>) – ‘rad’ or ‘deg’</p></li>
<li><p><strong>order</strong> – ‘xyz’, ‘zyx’ or ‘yxz’ [default ‘zyx’]</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check that rotation matrix is valid</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Roll-pitch-yaw angles</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">tr2rpy(R)</span></code> are the roll-pitch-yaw angles corresponding to
the rotation part of <code class="docutils literal notranslate"><span class="pre">R</span></code>.</p>
<p>The 3 angles RPY = <span class="math notranslate nohighlight">\([\theta_R, \theta_P, \theta_Y]\)</span> correspond to sequential rotations about the
Z, Y and X axes respectively.  The axis order sequence can be changed by
setting:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">order='xyz'</span></code>  for sequential rotations about X, Y, Z axes</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order='yxz'</span></code>  for sequential rotations about Y, X, Z axes</p></li>
</ul>
<p>By default the angles are in radians but can be changed setting <code class="docutils literal notranslate"><span class="pre">unit='deg'</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">rpy2tr</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">[[ 0.8384 -0.4183  0.3494  0.    ]</span>
<span class="go"> [ 0.458   0.8882 -0.0355  0.    ]</span>
<span class="go"> [-0.2955  0.1898  0.9363  0.    ]</span>
<span class="go"> [ 0.      0.      0.      1.    ]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2rpy</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([0.2, 0.3, 0.5])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>There is a singularity for the case where <span class="math notranslate nohighlight">\(\theta_P = \pi/2\)</span> in
which case we arbitrarily set <span class="math notranslate nohighlight">\(\theta_R=0\)</span> and 
<span class="math notranslate nohighlight">\(\theta_Y = \theta_R + \theta_Y\)</span>.</p></li>
<li><p>If the input is SE(3) the translation component is ignored.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.rpy2r" title="spatialmath.base.transforms3d.rpy2r"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2r()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.rpy2tr" title="spatialmath.base.transforms3d.rpy2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">rpy2tr()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a>, 
<a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trlog">
<code class="sig-name descname">trlog</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">twist</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trlog"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trlog" title="Permalink to this definition">¶</a></dt>
<dd><p>Logarithm of SO(3) or SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>check</strong> (<em>bool</em>) – check that matrix is valid</p></li>
<li><p><strong>twist</strong> (<em>bool</em>) – return a twist vector instead of matrix [default]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>logarithm</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad argument</p>
</dd>
</dl>
<p>An efficient closed-form solution of the matrix logarithm for arguments that are SO(3) or SE(3).</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trlog(R)</span></code> is the logarithm of the passed rotation matrix <code class="docutils literal notranslate"><span class="pre">R</span></code> which will be
3x3 skew-symmetric matrix.  The equivalent vector from <code class="docutils literal notranslate"><span class="pre">vex()</span></code> is parallel to rotation axis
and its norm is the amount of rotation about that axis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trlog(T)</span></code> is the logarithm of the passed homogeneous transformation matrix <code class="docutils literal notranslate"><span class="pre">T</span></code> which will be
4x4 augumented skew-symmetric matrix. The equivalent vector from <code class="docutils literal notranslate"><span class="pre">vexa()</span></code> is the twist
vector (6x1) comprising [v w].</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span>
<span class="go">array([[ 0. ,  0. ,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. , -0.3,  0. ],</span>
<span class="go">       [ 0. ,  0.3,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. ,  0. ,  0. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">twist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0. , 0. , 0. , 0.3, 0. , 0. ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">))</span>
<span class="go">array([[ 0. ,  0. ,  0. ],</span>
<span class="go">       [ 0. ,  0. , -0.3],</span>
<span class="go">       [ 0. ,  0.3,  0. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trlog</span><span class="p">(</span><span class="n">rotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">),</span> <span class="n">twist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">array([0.3, 0. , 0. ])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="#spatialmath.base.transforms3d.trexp" title="spatialmath.base.transforms3d.trexp"><code class="xref py py-func docutils literal notranslate"><span class="pre">trexp()</span></code></a>, <a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.vex" title="spatialmath.base.transformsNd.vex"><code class="xref py py-func docutils literal notranslate"><span class="pre">vex()</span></code></a>, <a class="reference internal" href="func_nd.html#spatialmath.base.transformsNd.vexa" title="spatialmath.base.transformsNd.vexa"><code class="xref py py-func docutils literal notranslate"><span class="pre">vexa()</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trexp">
<code class="sig-name descname">trexp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">S</span></em>, <em class="sig-param"><span class="n">theta</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">check</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trexp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponential of se(3) or so(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>S</strong> – se(3), so(3) matrix or equivalent twist vector</p></li>
<li><p><strong>θ</strong> (<em>float</em>) – motion</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matrix exponential in SE(3) or SO(3)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p>An efficient closed-form solution of the matrix exponential for arguments
that are so(3) or se(3).</p>
<p>For so(3) the results is an SO(3) rotation matrix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Ω)</span></code> is the matrix exponential of the so(3) element <code class="docutils literal notranslate"><span class="pre">Ω</span></code> which is
a 3x3 skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Ω,</span> <span class="pre">θ)</span></code> as above but for an so(3) motion of Ωθ, where <code class="docutils literal notranslate"><span class="pre">Ω</span></code> is
unit-norm skew-symmetric matrix representing a rotation axis and a
rotation magnitude given by <code class="docutils literal notranslate"><span class="pre">θ</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(ω)</span></code> is the matrix exponential of the so(3) element <code class="docutils literal notranslate"><span class="pre">ω</span></code>
expressed as a 3-vector.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(ω,</span> <span class="pre">θ)</span></code> as above but for an so(3) motion of ωθ where <code class="docutils literal notranslate"><span class="pre">ω</span></code> is a
unit-norm vector representing a rotation axis and a rotation magnitude
given by <code class="docutils literal notranslate"><span class="pre">θ</span></code>. <code class="docutils literal notranslate"><span class="pre">ω</span></code> is expressed as a 3-vector.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skew</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<span class="go">array([[-0.6949,  0.7135,  0.0893],</span>
<span class="go">       [-0.192 , -0.3038,  0.9332],</span>
<span class="go">       [ 0.693 ,  0.6313,  0.3481]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skew</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># revolute unit twist</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    , -0.4161, -0.9093],</span>
<span class="go">       [ 0.    ,  0.9093, -0.4161]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">array([[-0.6949,  0.7135,  0.0893],</span>
<span class="go">       [-0.192 , -0.3038,  0.9332],</span>
<span class="go">       [ 0.693 ,  0.6313,  0.3481]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># revolute unit twist</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    , -0.4161, -0.9093],</span>
<span class="go">       [ 0.    ,  0.9093, -0.4161]])</span>
</pre></div>
</div>
<p>For se(3) the results is an SE(3) homogeneous transformation matrix:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Σ)</span></code> is the matrix exponential of the se(3) element <code class="docutils literal notranslate"><span class="pre">Σ</span></code> which is
a 4x4 augmented skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(Σ,</span> <span class="pre">θ)</span></code> as above but for an se(3) motion of Σθ, where <code class="docutils literal notranslate"><span class="pre">Σ</span></code> must
represent a unit-twist, ie. the rotational component is a unit-norm
skew-symmetric matrix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(S)</span></code> is the matrix exponential of the se(3) element <code class="docutils literal notranslate"><span class="pre">S</span></code>
represented as a 6-vector which can be considered a screw motion.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trexp(S,</span> <span class="pre">θ)</span></code> as above but for an se(3) motion of Sθ, where <code class="docutils literal notranslate"><span class="pre">S</span></code> must
represent a unit-twist, ie. the rotational component is a unit-norm
skew-symmetric matrix.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skewa</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]))</span>
<span class="go">array([[-0.423 ,  0.0528,  0.9046,  1.6867],</span>
<span class="go">       [ 0.8802, -0.213 ,  0.424 ,  1.9326],</span>
<span class="go">       [ 0.2151,  0.9756,  0.0436,  2.5984],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">(</span><span class="n">skewa</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># prismatic unit twist</span>
<span class="go">array([[1., 0., 0., 2.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
<span class="go">array([[-0.423 ,  0.0528,  0.9046,  1.6867],</span>
<span class="go">       [ 0.8802, -0.213 ,  0.424 ,  1.9326],</span>
<span class="go">       [ 0.2151,  0.9756,  0.0436,  2.5984],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trexp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 2.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><code class="xref py py-func docutils literal notranslate"><span class="pre">trexp2()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trnorm">
<code class="sig-name descname">trnorm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trnorm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trnorm" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize an SO(3) or SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>T1</strong> – second SE(3) matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>normalized SE(3) or SO(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trnorm(R)</span></code> is guaranteed to be a proper orthogonal matrix rotation
matrix (3x3) which is <em>close</em> to the input matrix R (3x3).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trnorm(T)</span></code> as above but the rotational submatrix of the homogeneous
transformation T (4x4) is normalised while the translational part is
unchanged.</p></li>
</ul>
<p>The steps in normalization are:</p>
<ol class="arabic simple">
<li><p>If <span class="math notranslate nohighlight">\(\mathbf{R} = [n, o, a]\)</span></p></li>
<li><p>Form unit vectors <span class="math notranslate nohighlight">\(\hat{o}, \hat{a}\)</span> from  <span class="math notranslate nohighlight">\(o, a\)</span> respectively</p></li>
<li><p>Form the normal vector <span class="math notranslate nohighlight">\(\hat{n} = \hat{o} \times \hat{a}\)</span></p></li>
<li><p>Recompute <span class="math notranslate nohighlight">\(\hat{o} = \hat{a} \times \hat{n}\)</span> to ensure that <span class="math notranslate nohighlight">\(\hat{o}, \hat{a}\)</span> are orthogonal</p></li>
<li><p>Form the normalized SO(3) matrix <span class="math notranslate nohighlight">\(\mathbf{R} = [\hat{n}, \hat{o}, \hat{a}]\)</span></p></li>
</ol>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linalg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">troty</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="c1"># is a valid SO(3)</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span> <span class="o">@</span> <span class="n">T</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># not quite a valid SO(3) anymore</span>
<span class="go">-3.3306690738754696e-16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trnorm</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">linalg</span><span class="o">.</span><span class="n">det</span><span class="p">(</span><span class="n">T</span><span class="p">[:</span><span class="mi">3</span><span class="p">,:</span><span class="mi">3</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># once more a valid SO(3)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Only the direction of a-vector (the z-axis) is unchanged.</p></li>
<li><p>Used to prevent finite word length arithmetic causing transforms to
become ‘unnormalized’, ie. determinant <span class="math notranslate nohighlight">\(\ne 1\)</span>.</p></li>
</ul>
</div>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trinterp">
<code class="sig-name descname">trinterp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">start</span></em>, <em class="sig-param"><span class="n">end</span></em>, <em class="sig-param"><span class="n">s</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trinterp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trinterp" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate SE(3) matrices</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – initial SE(3) or SO(3) matrix value when s=0, if None then identity is used</p></li>
<li><p><strong>end</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – final SE(3) or SO(3) matrix, value when s=1</p></li>
<li><p><strong>s</strong> (<em>float</em>) – interpolation coefficient, range 0 to 1</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>interpolated SE(3) or SO(3) matrix value</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(None,</span> <span class="pre">T,</span> <span class="pre">S)</span></code> is a homogeneous transform (4x4) interpolated
between identity when S=0 and T (4x4) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(T0,</span> <span class="pre">T1,</span> <span class="pre">S)</span></code> as above but interpolated
between T0 (4x4) when S=0 and T1 (4x4) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(None,</span> <span class="pre">R,</span> <span class="pre">S)</span></code> is a rotation matrix (3x3) interpolated
between identity when S=0 and R (3x3) when S=1.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trinterp(R0,</span> <span class="pre">R1,</span> <span class="pre">S)</span></code> as above but interpolated
between R0 (3x3) when S=0 and R1 (3x3) when S=1.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T1</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T2</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 1.],</span>
<span class="go">       [0., 1., 0., 2.],</span>
<span class="go">       [0., 0., 1., 3.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 4.],</span>
<span class="go">       [0., 1., 0., 5.],</span>
<span class="go">       [0., 0., 1., 6.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[1. , 0. , 0. , 2.5],</span>
<span class="go">       [0. , 1. , 0. , 3.5],</span>
<span class="go">       [0. , 0. , 1. , 4.5],</span>
<span class="go">       [0. , 0. , 0. , 1. ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 0.],</span>
<span class="go">       [0., 1., 0., 0.],</span>
<span class="go">       [0., 0., 1., 0.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">array([[1., 0., 0., 4.],</span>
<span class="go">       [0., 1., 0., 5.],</span>
<span class="go">       [0., 0., 1., 6.],</span>
<span class="go">       [0., 0., 0., 1.]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinterp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="go">array([[1. , 0. , 0. , 2. ],</span>
<span class="go">       [0. , 1. , 0. , 2.5],</span>
<span class="go">       [0. , 0. , 1. , 3. ],</span>
<span class="go">       [0. , 0. , 0. , 1. ]])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rotation is interpolated using quaternion spherical linear interpolation (slerp).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_quat.html#spatialmath.base.quaternions.slerp" title="spatialmath.base.quaternions.slerp"><code class="xref py py-func docutils literal notranslate"><span class="pre">spatialmath.base.quaternions.slerp()</span></code></a>, <code class="xref py py-func docutils literal notranslate"><span class="pre">trinterp2()</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.delta2tr">
<code class="sig-name descname">delta2tr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#delta2tr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.delta2tr" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert differential motion to SE(3)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Δ</strong> (<em>array_like</em><em>(</em><em>6</em><em>)</em>) – differential motion as a 6-vector</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>SE(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">delta2tr(Δ)</span></code> is an SE(3) matrix representing differential
motion <span class="math notranslate nohighlight">\(\Delta = [\delta_x, \delta_y, \delta_z, \theta_x, \theta_y, \theta_z]\)</span>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta2tr</span><span class="p">([</span><span class="mf">0.001</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">array([[ 1.   ,  0.   ,  0.002,  0.001],</span>
<span class="go">       [ 0.   ,  1.   ,  0.   ,  0.   ],</span>
<span class="go">       [-0.002,  0.   ,  1.   ,  0.   ],</span>
<span class="go">       [ 0.   ,  0.   ,  0.   ,  1.   ]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control: Second Edition, P. Corke, Springer 2016; p67.</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.tr2delta" title="spatialmath.base.transforms3d.tr2delta"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2delta()</span></code></a></p>
</dd>
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trinv">
<code class="sig-name descname">trinv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trinv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trinv" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert an SE(3) matrix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – SE(3) matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>inverse of SE(3) matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(4,4)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p>Computes an efficient inverse of an SE(3) matrix:</p>
<p><span class="math notranslate nohighlight">\(\begin{pmatrix} {\bf R} &amp; t \\ 0\,0\,0 &amp; 1 \end{pmatrix}^{-1} =  \begin{pmatrix} {\bf R}^T &amp; -{\bf R}^T t \\ 0\,0\, 0 &amp; 1 \end{pmatrix}\)</span></p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trinv</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    , -4.    ],</span>
<span class="go">       [ 0.    ,  0.9553,  0.2955, -6.5498],</span>
<span class="go">       [ 0.    , -0.2955,  0.9553, -4.2544],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">@</span> <span class="n">trinv</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.,  0.,  0.,  0.],</span>
<span class="go">       [ 0.,  1., -0.,  0.],</span>
<span class="go">       [ 0., -0.,  1.,  0.],</span>
<span class="go">       [ 0.,  0.,  0.,  1.]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tr2delta">
<code class="sig-name descname">tr2delta</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T0</span></em>, <em class="sig-param"><span class="n">T1</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2delta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Difference of SE(3) matrices as differential motion</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T0</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – first SE(3) matrix</p></li>
<li><p><strong>T1</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – second SE(3) matrix</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Differential motion as a 6-vector</p>
</dd>
</dl>
<p>:rtype:ndarray(6)
:raises ValueError: bad arguments</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tr2delta(T0,</span> <span class="pre">T1)</span></code> is the differential motion Δ (6x1) corresponding to
infinitessimal motion (in the T0 frame) from pose T0 to T1 which are SE(3) matrices.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tr2delta(T)</span></code> as above but the motion is from the world frame to the pose represented by T.</p></li>
</ul>
<p>The vector <span class="math notranslate nohighlight">\(\Delta = [\delta_x, \delta_y, \delta_z, \theta_x, \theta_y, \theta_z\)</span>
represents infinitessimal translation and rotation, and is an approximation to the
instantaneous spatial velocity multiplied by time step.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T1</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T2</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.31</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mf">5.02</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2delta</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">)</span>
<span class="go">array([ 0.    ,  0.0191, -0.0059,  0.01  ,  0.    ,  0.    ])</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Δ is only an approximation to the motion T, and assumes
that T0 ~ T1 or T ~ eye(4,4).</p></li>
<li><p>Can be considered as an approximation to the effect of spatial velocity over a
a time interval, average spatial velocity multiplied by time.</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control: Second Edition, P. Corke, Springer 2016; p67.</p>
</dd>
<dt class="field-even">Seealso</dt>
<dd class="field-even"><p><a class="reference internal" href="#spatialmath.base.transforms3d.delta2tr" title="spatialmath.base.transforms3d.delta2tr"><code class="xref py py-func docutils literal notranslate"><span class="pre">delta2tr()</span></code></a></p>
</dd>
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tr2jac">
<code class="sig-name descname">tr2jac</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">samebody</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tr2jac"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tr2jac" title="Permalink to this definition">¶</a></dt>
<dd><p>SE(3) adjoint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>)</em>) – SE(3) matrix</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>adjoint matrix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray(6,6)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p>Computes an adjoint matrix that maps spatial velocity between two frames defined by
an SE(3) matrix.  It is a Jacobian matrix.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tr2jac(T)</span></code> is a Jacobian matrix (6x6) that maps spatial velocity or
differential motion from frame {A} to frame {B} where the pose of {B}
relative to {A} is represented by the homogeneous transform T = <span class="math notranslate nohighlight">\({}^A {\bf T}_B\)</span>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tr2jac(T,</span> <span class="pre">True)</span></code> as above but for the case when frame {A} to frame {B} are both
attached to the same moving body.  This is the adjoint matrix</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">trotx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tr2jac</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="go">array([[ 1.    ,  0.    ,  0.    ,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.9553,  0.2955,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    , -0.2955,  0.9553,  0.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  1.    ,  0.    ,  0.    ],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.9553,  0.2955],</span>
<span class="go">       [ 0.    ,  0.    ,  0.    ,  0.    , -0.2955,  0.9553]])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Reference</dt>
<dd class="field-odd"><p>Robotics, Vision &amp; Control: Second Edition, P. Corke, Springer 2016; p65.</p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.adjoint">
<code class="sig-name descname">adjoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#adjoint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.adjoint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trprint">
<code class="sig-name descname">trprint</code><span class="sig-paren">(</span><em class="sig-param">T</em>, <em class="sig-param">orient='rpy/zyx'</em>, <em class="sig-param">label=None</em>, <em class="sig-param">file=&lt;_io.TextIOWrapper name='&lt;stdout&gt;' mode='w' encoding='UTF-8'&gt;</em>, <em class="sig-param">fmt='{:8.2g}'</em>, <em class="sig-param">degsym=True</em>, <em class="sig-param">unit='deg'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trprint" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Compact display of SO(3) or SE(3) matrices</p>
<dl class="field-list simple">
<dt class="field-odd">param T</dt>
<dd class="field-odd"><p>SE(3) or SO(3) matrix</p>
</dd>
<dt class="field-even">type T</dt>
<dd class="field-even"><p>ndarray(4,4) or ndarray(3,3)</p>
</dd>
<dt class="field-odd">param label</dt>
<dd class="field-odd"><p>text label to put at start of line</p>
</dd>
<dt class="field-even">type label</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param orient</dt>
<dd class="field-odd"><p>3-angle convention to use</p>
</dd>
<dt class="field-even">type orient</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param file</dt>
<dd class="field-odd"><p>file to write formatted string to. [default, stdout]</p>
</dd>
<dt class="field-even">type file</dt>
<dd class="field-even"><p>file object</p>
</dd>
<dt class="field-odd">param fmt</dt>
<dd class="field-odd"><p>conversion format for each number</p>
</dd>
<dt class="field-even">type fmt</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param unit</dt>
<dd class="field-odd"><p>angular units: ‘rad’ [default], or ‘deg’</p>
</dd>
<dt class="field-even">type unit</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">return</dt>
<dd class="field-odd"><p>formatted string</p>
</dd>
<dt class="field-even">rtype</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">raises ValueError</dt>
<dd class="field-odd"><p>bad argument</p>
</dd>
</dl>
<p>The matrix is formatted and written to <code class="docutils literal notranslate"><span class="pre">file</span></code> and the
string is returned.  To suppress writing to a file, set <code class="docutils literal notranslate"><span class="pre">file=None</span></code>.</p>
</div></blockquote>
<ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">trprint(R)</span></code> displays the SO(3) rotation matrix in a compact</dt><dd><p>single-line format:</p>
<blockquote>
<div><p>[LABEL:] ORIENTATION UNIT</p>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">trprint(T)</span></code> displays the SE(3) homogoneous transform in a compact
single-line format:</p>
<blockquote>
<div><p>[LABEL:] [t=X, Y, Z;] ORIENTATION UNIT</p>
</div></blockquote>
</li>
</ul>
<p>Orientation is expressed in one of several formats:</p>
<ul class="simple">
<li><p>‘rpy/zyx’ roll-pitch-yaw angles in ZYX axis order [default]</p></li>
<li><p>‘rpy/yxz’ roll-pitch-yaw angles in YXZ axis order</p></li>
<li><p>‘rpy/zyx’ roll-pitch-yaw angles in ZYX axis order</p></li>
<li><p>‘eul’ Euler angles in ZYZ axis order</p></li>
<li><p>‘angvec’ angle and axis</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">spatialmath.base</span> <span class="kn">import</span> <span class="n">transl</span><span class="p">,</span> <span class="n">rpy2tr</span><span class="p">,</span> <span class="n">trprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">@</span> <span class="n">rpy2tr</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;deg&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">&#39;t =        1,        2,        3; rpy/zyx =       10°,       20°,       30°&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;angvec&#39;</span><span class="p">)</span>
<span class="go">&#39;T: t =        1,        2,        3; angvec = (      36° |     0.12,     0.62,     0.78)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">trprint</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;angvec&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{:8.4g}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">&#39;T: t =        1,        2,        3; angvec = (   35.82° |    0.124,   0.6156,   0.7782)&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">seealso</dt>
<dd class="field-odd"><p><a class="reference internal" href="func_2d.html#spatialmath.base.transforms2d.trprint2" title="spatialmath.base.transforms2d.trprint2"><code class="xref py py-func docutils literal notranslate"><span class="pre">trprint2()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2eul" title="spatialmath.base.transforms3d.tr2eul"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2eul()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2rpy" title="spatialmath.base.transforms3d.tr2rpy"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2rpy()</span></code></a>, <a class="reference internal" href="#spatialmath.base.transforms3d.tr2angvec" title="spatialmath.base.transforms3d.tr2angvec"><code class="xref py py-func docutils literal notranslate"><span class="pre">tr2angvec()</span></code></a></p>
</dd>
<dt class="field-even">SymPy</dt>
<dd class="field-even"><p>not supported</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.trplot">
<code class="sig-name descname">trplot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="n">axes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">block</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">dims</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">color</span><span class="o">=</span><span class="default_value">'blue'</span></em>, <em class="sig-param"><span class="n">frame</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">textcolor</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">labels</span><span class="o">=</span><span class="default_value">('X', 'Y', 'Z')</span></em>, <em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">arrow</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">projection</span><span class="o">=</span><span class="default_value">'ortho'</span></em>, <em class="sig-param"><span class="n">rviz</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">wtl</span><span class="o">=</span><span class="default_value">0.2</span></em>, <em class="sig-param"><span class="n">width</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">d1</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">d2</span><span class="o">=</span><span class="default_value">1.15</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#trplot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.trplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a 3D coordinate frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>T</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>axes</strong> (<em>Axes3D reference</em>) – the axes to plot into, defaults to current axes</p></li>
<li><p><strong>block</strong> (<em>bool</em>) – run the GUI main loop until all windows are closed, default True</p></li>
<li><p><strong>dims</strong> (<em>array_like</em><em>(</em><em>6</em><em>) or </em><em>array_like</em><em>(</em><em>2</em><em>)</em>) – dimension of plot volume as [xmin, xmax, ymin, ymax,zmin, zmax].
If dims is [min, max] those limits are applied to the x-, y- and z-axes.</p></li>
<li><p><strong>color</strong> (<em>str</em>) – color of the lines defining the frame</p></li>
<li><p><strong>textcolor</strong> (<em>str</em>) – color of text labels for the frame, default color of lines above</p></li>
<li><p><strong>frame</strong> (<em>str</em>) – label the frame, name is shown below the frame and as subscripts on the frame axis labels</p></li>
<li><p><strong>labels</strong> (<em>3-tuple of strings</em>) – labels for the axes, defaults to X, Y and Z</p></li>
<li><p><strong>length</strong> (<em>float</em>) – length of coordinate frame axes, default 1</p></li>
<li><p><strong>arrow</strong> (<em>bool</em>) – show arrow heads, default True</p></li>
<li><p><strong>wtl</strong> (<em>float</em>) – width-to-length ratio for arrows, default 0.2</p></li>
<li><p><strong>rviz</strong> (<em>bool</em>) – show Rviz style arrows, default False</p></li>
<li><p><strong>projection</strong> (<em>str</em>) – 3D projection: ortho [default] or persp</p></li>
<li><p><strong>width</strong> (<em>float</em>) – width of lines, default 1</p></li>
<li><p><strong>d1</strong> – distance of frame axis label text from origin, default 1.15</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>axes containing the frame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Axes3DSubplot</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – bad arguments</p>
</dd>
</dl>
<p>Adds a 3D coordinate frame represented by the SO(3) or SE(3) matrix to the current axes.</p>
<ul class="simple">
<li><p>If no current figure, one is created</p></li>
<li><p>If current figure, but no axes, a 3d Axes is created</p></li>
</ul>
<p>Examples:</p>
<blockquote>
<div><p>trplot(T, frame=’A’)
trplot(T, frame=’A’, color=’green’)
trplot(T1, ‘labels’, ‘NOA’);</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>not supported</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="spatialmath.base.transforms3d.tranimate">
<code class="sig-name descname">tranimate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">T</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/spatialmath/base/transforms3d.html#tranimate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#spatialmath.base.transforms3d.tranimate" title="Permalink to this definition">¶</a></dt>
<dd><p>Animate a 3D coordinate frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R</strong> (<em>ndarray</em><em>(</em><em>4</em><em>,</em><em>4</em><em>) or </em><em>ndarray</em><em>(</em><em>3</em><em>,</em><em>3</em><em>)</em>) – SE(3) or SO(3) matrix</p></li>
<li><p><strong>nframes</strong> (<em>int</em>) – number of steps in the animation [defaault 100]</p></li>
<li><p><strong>repeat</strong> (<em>bool</em>) – animate in endless loop [default False]</p></li>
<li><p><strong>interval</strong> (<em>int</em>) – number of milliseconds between frames [default 50]</p></li>
<li><p><strong>movie</strong> (<em>str</em>) – name of file to write MP4 movie into</p></li>
</ul>
</dd>
</dl>
<p>Animates a 3D coordinate frame moving from the world frame to a frame represented by the SO(3) or SE(3) matrix to the current axes.</p>
<ul class="simple">
<li><p>If no current figure, one is created</p></li>
<li><p>If current figure, but no axes, a 3d Axes is created</p></li>
</ul>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tranimate</span><span class="p">(</span><span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="nd">@trotx</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tranimate</span><span class="p">(</span><span class="n">transl</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="nd">@trotx</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">frame</span><span class="o">=</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="n">arrow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">movie</span><span class="o">=</span><span class="s1">&#39;spin.mp4&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">SymPy</dt>
<dd class="field-odd"><p>not supported</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="func_nd.html" class="btn btn-neutral float-right" title="Transforms in ND" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="func_2d.html" class="btn btn-neutral float-left" title="Transforms in 2D" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Peter Corke.
      <span class="lastupdated">
        Last updated on 01-Feb-2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'G-11Q6WJM565', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>